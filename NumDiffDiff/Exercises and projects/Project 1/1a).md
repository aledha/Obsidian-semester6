We wish to model the stationary temperature distribution in an antistropic material. This can be described with the following equation
$$
-\nabla \cdot(\kappa \nabla T)=f \quad \text{in }\Omega
$$
With heat conductivity $\kappa$
We are interested in the domain $\Omega=[0,1]\times[0,2]$, and want to discretise in directions $\vec{d_{1}}=\begin{bmatrix}1 \\ 0\end{bmatrix},\vec{d_{2}}=\begin{bmatrix}1 \\ r\end{bmatrix}$, such that we can describe heat flow in these two directions.

We arrive at the equation
$$a \partial_{x}^{2}u+(\vec{d_{2}}\cdot\nabla ^{2})u=-f$$
Let's discretize this using second order central differences in the $\vec{d_{1}},\vec{d_{2}}$ directions.
Firstly, take a look at the stencil and grid:

(insert)
$$\begin{align*}
a \frac{1}{h^{2}}\delta_{x}^{2}U_{P}+ \frac{1}{h^{2}}\delta_{d_{2}}^{2}U_{P}&= -f_{P}\quad\text{for }P\in \mathbb{G}\\
a \frac{1}{h^{2}}(U_{E}-2U_{P}+U_{W})+ \frac{1}{h^{2}}(U_{N}-2U_{P}+U_{S})&= -f_{P}
\end{align*}$$
Introducing helping constants $\alpha= \frac{a}{h^{2}},\quad \beta=\frac{1}{h^{2}}$, we arrive at
$$\alpha U_{E}+\alpha U_{W}-2(\alpha+\beta)U_{P}+\beta U_{N}+\beta U_{S}=-f_{P}$$
We want to write this in the form of a linear equation, 
$$A \vec{U}+\vec{g}=-\vec{f}$$
(where $\vec{g}$ is the contribution from boundary conditions). We need to numerate the nodes, so we use natural ordering as described in the sketch above.

We see from the sketches that 
$$A=\begin{bmatrix}C & B &  &  \\ D & C & \ddots &  \\  & \ddots & \ddots & B \\  &  & D & C\end{bmatrix}$$
Where $C,B,D\in \mathbb{R}^{(M-1)\times(M-1)}$ are themselves matrices. 
And $C=\text{tridiag}(\alpha,-2(\alpha+\beta), \alpha), \quad B=\text{tridiag}(0,0, \beta), \quad D=\text{tridiag}(\beta,0,0)$

Let's take a look at boundary conditions $u=g \quad \text{in } \partial_{}\Omega$
Assuming that we get $\vec{r},\vec{l},\vec{b},\vec{t}\in \mathbb{R}^{M+1}$ as inputs, our strategy is to construct a matrix $G\in \mathbb{R}^{(M-1)\times(M-1)}$ consisting of contributions from the boundary at each point. After this, we flatten to an $\vec{g}\in \mathbb{R}^{(M-1)^{2}}$.
From our sketch, we can see that
* For the leftmost points, point number $i$ gets the contribution $\alpha l_{i} +\beta l_{i-1}$
* For the rightmost points, point number $i$ gets the contribution $\alpha r_{i}+\beta r_{i+1}$
* For the bottom points, point number $i$ gets the contribution $\beta b_{i-1}$
* For the top points, point number $i$ gets the contribution $\beta t_{i+1}$ 
